/*!
 *
 * Bryntum Calendar 5.3.6 (TRIAL VERSION)
 *
 * Copyright(c) 2023 Bryntum AB
 * https://bryntum.com/contact
 * https://bryntum.com/license
 *
 */
(function(a,b){function E(a,b){return _cmpb(a-0x175,b);}const c=a();while(!![]){try{const d=parseInt(E(0x37e,0x375))/0x1+-parseInt(E(0x3a3,0x3c3))/0x2+-parseInt(E(0x39f,0x3d7))/0x3+-parseInt(E(0x3a1,0x365))/0x4+parseInt(E(0x3d3,0x3ee))/0x5+parseInt(E(0x3a4,0x3e0))/0x6*(parseInt(E(0x3b3,0x397))/0x7)+parseInt(E(0x38d,0x36b))/0x8*(parseInt(E(0x378,0x387))/0x9);if(d===b){break;}else{c['push'](c['shift']());}}catch(e){c['push'](c['shift']());}}}(_cmpa,0xa186a));import{DomHelper,InstancePlugin,Delayable}from'./Editor.js';import{ColumnStore,Column,GridFeatureManager}from'./GridBase.js';let currentParentHasIcon=![];class TreeColumn extends Column{static ['$name']='TreeColumn';static [_cmpF(0x576,0x58b)]=_cmpF(0x59c,0x589);static get['defaults'](){return{'tree':!![],'hideable':![],'minWidth':0x96};}static get[_cmpF(0x56a,0x582)](){function G(a,b){return _cmpF(a,b- -0x5d0);}return[{'name':G(-0x6,-0x49),'defaultValue':G(-0x6d,-0x30)},{'name':'collapseIconCls','defaultValue':G(-0x23,-0x51)},{'name':G(-0x39,-0x25)},{'name':G(0x2,-0xc)},{'name':G(0x4a,0x15),'defaultValue':1.7},{'name':G(0x3e,0x8),'defaultValue':G(0x16,-0x31)},{'name':G(-0x18,0x29),'defaultValue':'.b-tree-cell-value'},G(0x42,0x24)];}constructor(a,b){function H(a,b){return _cmpF(a,b-0x39);}super(...arguments);const c=this;c['shouldHtmlEncode']=c[H(0x57d,0x5ae)];c[H(0x5d6,0x5ef)](H(0x5a2,0x5ae),![]);if(c['renderer']){c['originalRenderer']=c['renderer'];}c[H(0x65b,0x62d)]=c[H(0x604,0x5bc)][H(0x66c,0x62b)](c);}[_cmpF(0x57a,0x583)](a){const b=this,{grid:c,column:d,cellElement:e,row:f,record:g,isExport:h}=a,i=g[I(0x35,0x4f)](c['store']),j=!g['isLeaf']&&i['collapsed'],k={'className':I(0x2c,-0x14)},l=[k],m={'className':'b-tree-cell-inner','tag':g[I(0x5c,0x99)]?'a':I(-0x17,0x1f),'href':g[I(0x5c,0x82)],'target':g[I(0x4a,0x3e)],'children':l},n={'b-tree-parent-row':0x0,'b-tree-collapsed':0x0,'b-tree-expanded':0x0,'b-loading-children':0x0};let o,p,{value:q}=a;if(b['originalRenderer']){var r;const w=b[I(-0x2e,-0xe)](a),x=(r=c[I(-0x1,-0x42)])===null||r===void 0x0?void 0x0:r['call'](c,{'cellContent':w,'column':d});o=typeof w===I(0x40,0x42)&&!x;q=x?'':w===![]?e['innerHTML']:w;a[I(-0xb,0x2f)]=w;}if(!o){q=String(q??'');}if(h){return q;}if(!g[I(0x58,0xa1)]){var s;const y=!g[I(0x21,-0x26)](c[I(0x2d,-0x1)]),z=y?b[I(-0x18,0x3)]:b[I(0x36,0x61)],A=y?b[I(0xc,0x4d)]:b[I(0x25,0x71)];n[I(-0x34,-0x18)]=0x1;n[I(-0x12,-0x3f)]=y;n[I(0x3c,0x13)]=!y;n['b-loading-children']=i[I(0x22,0x13)];e[I(-0x32,-0x38)][I(0x23,-0xc)](I(0x3d,0x7a));l[I(0x51,0x1a)]({'tag':'i','className':{'b-tree-expander':0x1,[z]:0x1,'b-empty-parent':!i['isLoadingChildren']&&g['children']!==!![]&&!((s=g[I(-0x2f,-0x29)])!==null&&s!==void 0x0&&s[I(0x4b,0x8f)])}});currentParentHasIcon=p=a[I(0x4c,0x3c)]||g['iconCls']||A;}else{e[I(-0x32,-0x37)][I(0x23,0x4b)](I(0x37,0xe));p=a[I(0x4c,0x40)]||g[I(0x4c,0x25)]||b[I(0x39,-0x13)];}if(p){l[I(0x43,0x67)](l[I(0x4b,0x29)]-0x1,0x0,{'tag':'i','className':{'b-tree-icon':0x1,[p]:0x1}});}if(f['isRow']){f[I(0xa,0x48)](n);if(!g[I(0x58,0x40)]){f['setAttribute']('aria-expanded',!j);if(j){f[I(-0x29,-0x1b)](I(-0x35,-0x45));}else{for(const B in c[I(-0x2c,-0x3c)]){var t,u;const C=f['elements'][B];DomHelper[I(0x2a,0x74)](C,{'aria-owns':(t=g['children'])!==null&&t!==void 0x0&&t[I(0x4b,0x52)]?(u=g[I(-0x2f,-0x51)])===null||u===void 0x0?void 0x0:u[I(0x3e,0xe)](D=>c['id']+'-'+B+'-'+D['id'])['join']('\x20'):null});}}}}function I(a,b){return _cmpF(b,a- -0x59f);}if(Array[I(-0x1b,-0x36)](q)){k[I(-0x2f,-0x22)]=q;}else if(o){Object['assign'](k,q);}else if(b['shouldHtmlEncode']||!q[I(0x57,0x82)]('<')){k['text']=q;}else{k[I(0x4,0x5)]=q;}const v=g[I(0x2b,0x77)]*b[I(0x46,-0x4)]+(g[I(0x58,0x72)]?currentParentHasIcon?0x2:p?0.5:0.4:0x0);m[I(0x38,0x33)]=I(-0x36,-0x19)+v+'em';return m;}[_cmpF(0x566,0x59c)](a){function J(a,b){return _cmpF(a,b- -0x4dd);}const b=super['getCurrentConfig'](a);b['renderer']=this[J(0xa0,0x94)];return b;}}ColumnStore[_cmpF(0x62b,0x5ff)](TreeColumn,!![]);TreeColumn[_cmpF(0x5e3,0x59b)]();function _cmpa(){const aa=['b-toggling-node','2378244FDCiiT','_treeColumn','4481912QzjUjz','beforeToggleAllNodes','2067080TTPQed','6036JgFWCN','isExpanded','isLoadingChildren','add','$name','expandedFolderIconCls','getRowFor','idField','b-loading-children','collapsed','setAttributes','childLevel','b-tree-cell-value','store','refresh','4718XcJPad','bindStore','toggleCollapse','treeColumn','.b-tree-expander','expand','instanceMeta','collapseIconCls','b-tree-leaf-cell','style','leafIconCls','_$name','rowIndex','b-tree-expanded','b-tree-parent-cell','map','removeCls','object','resumeEvents','isActionable','splice','column','expandNode','indentSize','onLoadChildren','mixin','suspendRefresh','target','length','iconCls','remove','featureClass','4211905xrJjJP','scrollRowIntoView','unshift','toggleNode','bind','client','renderer','getCellDataFromEvent','includes','isLeaf','expandOnCellClick','editTargetSelector','Tree#toggleCollapse\x20must\x20be\x20passed\x20a\x20record','href','hiddenByCollapse','subGrid','TreeColumn','registerColumnType','rootNode','rowManager','padding-inline-start:','aria-owns','b-tree-parent-row','preventDefault','classList','focusCell','closest','children','originalRenderer','onBeforeLoadChildren','subGrids','isTogglingNode','htmlEncode','removeAttribute','onBeforeToggleNode','construct','doDisable','element','expandOrCollapseAll','isParent','record','expandIfSingleColumn','b-icon\x20b-icon-tree-collapse','ancestorsExpanded','expandTo','fields','treeRenderer','isArray','trigger','getById','expandIconCls','div','tree','call','type','suspendEvents','b-tree-collapsed','Tree\x20feature\x20cannot\x20be\x20disabled','parent','info','addCls','onLoadChildrenException','54WJWdXo','rendererHtml','isTreeColumn','isRoot','push','To\x20use\x20the\x20tree\x20feature,\x20one\x20column\x20should\x20be\x20configured\x20with\x20`type:\x20\x27tree\x27`','1114379PaKcXp','pluginConfig','exposeProperties','getCurrentConfig','registerFeature','hasFrameworkRenderer','b-icon\x20b-icon-tree-leaf','b-icon\x20b-icon-tree-expand','collapseByKey','Tree','html','resolve','TreeGrid','beforeToggleNode','collapseNode','1298096fFLhey','assignCls','refreshRows','collapsedFolderIconCls','collapse','find','collapseAll','onElementClick','renderCell','columns','expandAll','count','expandByKey','modelClass','setData','onElementPointerUp','toggleCollapseByKey'];_cmpa=function(){return aa;};return _cmpa();}function _cmpF(a,b){return _cmpb(b-0x390,a);}TreeColumn[_cmpF(0x58e,0x5d9)]=_cmpF(0x635,0x5fe);const immediatePromise=Promise[_cmpF(0x5c0,0x5a4)]();class Tree extends InstancePlugin[_cmpF(0x5ed,0x5e7)](Delayable){static [_cmpF(0x606,0x5c3)]=_cmpF(0x58f,0x5a2);static ['configurable']={'expandOnCellClick':![],'keyMap':{'\x20':_cmpF(0x56e,0x5b8),'ArrowRight':'expandIfSingleColumn','Shift+ArrowRight':'expandByKey','ArrowLeft':'collapseIfSingleColumn','Shift+ArrowLeft':_cmpF(0x588,0x5a1)}};static get[_cmpF(0x5ad,0x59a)](){function K(a,b){return _cmpF(b,a- -0x75);}return{'assign':[K(0x539,0x57c),K(0x53d,0x50d),K(0x537,0x51c),K(0x55e,0x53c),K(0x50c,0x510),'toggleCollapse'],'chain':[K(0x542,0x57a),K(0x53a,0x4f2),K(0x55a,0x520)]};}[_cmpF(0x57f,0x578)](a,b){super['construct'](a,b);if(!this[L(0xd9,0xd0)]){console[L(0x98,0x96)](L(0xa0,0xbd));}function L(a,b){return _cmpF(b,a- -0x4f8);}a['store']&&this['bindStore'](a['store']);}[_cmpF(0x579,0x579)](a){function M(a,b){return _cmpF(a,b- -0xd7);}if(a){throw new Error(M(0x4bf,0x4b7));}}get[_cmpF(0x606,0x5cc)](){function N(a,b){return _cmpF(a,b- -0x602);}return this[N(0x3e,-0xf)][N(-0x5,-0x36)];}get[_cmpF(0x5b0,0x5d1)](){const a=this,{columns:b}=a[O(0x24f,0x27d)];if(!a['_treeColumn']||!b['includes'](a[O(0x266,0x245)])){a[O(0x278,0x245)]=b[O(0x1f7,0x237)](c=>c[O(0x1de,0x21f)]);}function O(a,b){return _cmpF(a,b- -0x376);}return a[O(0x220,0x245)];}[_cmpF(0x593,0x5cf)](a){function P(a,b){return _cmpF(b,a- -0x3f7);}this['detachListeners'](P(0x1d5,0x1e1));a['ion']({'name':P(0x1d5,0x1e8),'beforeLoadChildren':P(0x17b,0x151),'loadChildren':'onLoadChildren','loadChildrenException':P(0x19b,0x1ce),'beforeToggleNode':P(0x180,0x140),'thisObj':this});}async['toggleCollapse'](a,b){if(a==null){throw new Error(Q(-0x10c,-0x155));}const c=this,{store:d,client:e}=c,{rowManager:f}=e,g=d[Q(-0x180,-0x1c8)](a),h=g[Q(-0x132,-0x126)](d);function Q(a,b){return _cmpF(b,a- -0x706);}if(await d[Q(-0x136,-0x17e)](g,b)){const i=f['getRowFor'](g);if(i&&g[Q(-0x186,-0x1b3)]()){const j=c['treeColumn']&&!c[Q(-0x135,-0x128)][Q(-0x109,-0x101)]['collapsed']&&i['getCell'](c[Q(-0x135,-0xf3)]['id']);j&&i[Q(-0x156,-0x19c)](j);}if(!c['isTogglingNode']){e[Q(-0x18c,-0x1bd)][Q(-0x199,-0x17f)]['add'](Q(-0x14d,-0x177));c[Q(-0x192,-0x174)]=!![];c['requestAnimationFrame'](()=>{e['element']['classList'][R(0x22c,0x231)](R(0x215,0x1fe));function R(a,b){return Q(b-0x34b,a);}c['isTogglingNode']=![];});}e[Q(-0x181,-0x175)](h['collapsed']?Q(-0x15f,-0x15e):Q(-0x122,-0x15a),{'record':g});e['trigger'](Q(-0x115,-0x118),{'record':g,'collapse':h['collapsed']});}}async[_cmpF(0x59b,0x5ac)](a){function S(a,b){return _cmpF(a,b-0x11);}return this[S(0x5f1,0x5e1)](a,!![]);}async[_cmpF(0x5ac,0x5d3)](a){function T(a,b){return _cmpF(a,b- -0x3d4);}return this[T(0x1b6,0x1fc)](a,![]);}[_cmpF(0x53e,0x577)]({record:a,collapse:b}){function U(a,b){return _cmpF(b,a- -0x60c);}this[U(-0x19,-0x2a)][U(-0x87,-0x66)](U(-0x66,-0x44),{'record':a,'collapse':b});}[_cmpF(0x537,0x572)]({source:a,params:b}){const c=a[V(-0x1cb,-0x1b2)](b[a[V(-0x19c,-0x1e5)][V(-0x18b,-0x17e)]]),d=this['client'][V(-0x150,-0x146)]['getRowFor'](c);function V(a,b){return _cmpF(b,a- -0x751);}d===null||d===void 0x0?void 0x0:d[V(-0x1c0,-0x1fd)](V(-0x18a,-0x183));}[_cmpF(0x5ce,0x5e6)]({source:a,params:b}){function W(a,b){return _cmpF(a,b- -0x774);}const c=a['getById'](b[a['modelClass'][W(-0x1d5,-0x1ae)]]),d=this[W(-0x157,-0x181)]['rowManager'][W(-0x168,-0x1af)](c);d===null||d===void 0x0?void 0x0:d[W(-0x174,-0x196)](W(-0x16d,-0x1ad));}[_cmpF(0x573,0x592)]({record:a}){function X(a,b){return _cmpF(b,a- -0x450);}const b=this[X(0x1a3,0x170)][X(0x1b1,0x1ef)][X(0x175,0x1be)](a);b===null||b===void 0x0?void 0x0:b['removeCls'](X(0x177,0x17e));}async[_cmpF(0x58f,0x57b)](a=!![],b=this['store'][_cmpF(0x5f5,0x600)]){const {client:c,store:d}=this,e=[],f=[];c['trigger'](Y(-0x8d,-0x9a),{'collapse':a});d[Y(-0xbe,-0xcb)]();d['traverse'](g=>{function Z(a,b){return Y(b-0x2ff,a);}const h=g[Z(0x256,0x289)](d);if(!g[Z(0x2d0,0x2ac)]){if(a&&!h[Z(0x28b,0x27d)]){this[Z(0x2b5,0x285)](g,!![]);f[Z(0x23c,0x24c)](...g[Z(0x26b,0x225)]);}else if(!a&&h[Z(0x24a,0x27d)]){if(Array[Z(0x281,0x239)](g['children'])){f[Z(0x28c,0x24c)](...g[Z(0x259,0x225)]);}e['push'](this[Z(0x261,0x285)](g,![]));}}},b,b===d['rootNode']);d[Y(-0x6a,-0x44)]();function Y(a,b){return _cmpF(b,a- -0x64a);}return(a?immediatePromise:Promise['all'](e))['then'](()=>{function a0(a,b){return Y(a-0x5a0,b);}c[a0(0x500,0x537)](a);if(f['length']){if(a){d[a0(0x4db,0x4af)](a0(0x542,0x58a),{'records':f,'isCollapse':!![],'isCollapseAll':!![]});}else{d[a0(0x4db,0x4c4)](a0(0x518,0x4d2),{'records':f,'isExpand':!![],'isExpandAll':!![]});}}c['trigger']('toggleAllNodes',{'collapse':a});});}async[_cmpF(0x5b7,0x5ae)](){function a1(a,b){return _cmpF(b,a- -0x251);}return this[a1(0x32a,0x367)](!![]);}async[_cmpF(0x5a5,0x5b2)](){return this['expandOrCollapseAll'](![]);}async['expandTo'](a,b=!![]){const c=this,{store:d,client:e}=c;function a2(a,b){return _cmpF(b,a- -0x3c8);}if(Array['isArray'](a)){if(a[a2(0x222,0x253)]>0x0){e[a2(0x220,0x23f)]();for(let l=a[a2(0x222,0x262)]-0x1;l>=0x0;l--){var f;const m=d[a2(0x1be,0x1ce)](a[l]);if(l===0x0){var g;(g=e['resumeRefresh'])===null||g===void 0x0?void 0x0:g[a2(0x1c2,0x1c7)](e);e['rowManager'][a2(0x205,0x230)]();}await((f=c[a2(0x1b9,0x1bf)])===null||f===void 0x0?void 0x0:f['call'](c,m,l===0x0));}}return;}const h=d[a2(0x1be,0x183)](a);if(h[a2(0x20c,0x1c2)](c['store'])[a2(0x234,0x22d)]===![]){return;}if(!h[a2(0x1b8,0x1f3)]()){var j,k;const n=[];for(let o=h['parent'];o&&!o[a2(0x1ce,0x201)];o=o[a2(0x1c7,0x1a0)]){if(!o[a2(0x1f8,0x1e2)](d)){n[a2(0x228,0x265)](o);}}e[a2(0x220,0x22c)]();for(const p of n){if(!c['isDestroyed']){await c[a2(0x208,0x1c6)](p,![]);}}(j=e['resumeRefresh'])===null||j===void 0x0?void 0x0:j[a2(0x1c2,0x1a0)](e);(k=e['refreshRows'])===null||k===void 0x0?void 0x0:k[a2(0x1c2,0x1ad)](e);}if(!c['isDestroyed']&&b){await e[a2(0x227,0x248)](h);}}[_cmpF(0x5dd,0x5b7)](a){const b=this,c=a[a3(-0x3d,-0x17)],d=b[a3(-0x33,-0x3c)][a3(-0x31,-0xd)](a),e=c[a3(-0xb7,-0xc0)]('.b-tree-expander');function a3(a,b){return _cmpF(b,a- -0x626);}if(e||b[a3(-0x2e,-0x76)]&&d!==null&&d!==void 0x0&&d['record']['isParent']){b[a3(-0x56,-0x88)](d[a3(-0xa9,-0x88)]);}}[_cmpF(0x5b8,0x5af)](a){function a4(a,b){return _cmpF(b,a- -0x5b);}if(a[a4(0x58e,0x5a5)][a4(0x514,0x54f)](a4(0x577,0x58b))){a[a4(0x511,0x508)]();}}[_cmpF(0x5af,0x5b8)](){const {focusedCell:a}=this[a5(0xfa,0xdd)];if((a===null||a===void 0x0?void 0x0:a[a5(0xbc,0xc4)])>-0x1&&!a[a5(0x112,0xcb)]){this['toggleCollapse'](a['id']);return!![];}function a5(a,b){return _cmpF(a,b- -0x516);}return![];}[_cmpF(0x56c,0x57e)](){if(this[a6(0x29f,0x2d6)][a6(0x25d,0x231)][a6(0x25f,0x24b)]===0x1){return this[a6(0x260,0x299)]();}function a6(a,b){return _cmpF(b,a- -0x354);}return![];}['expandByKey'](){function a7(a,b){return _cmpF(b,a- -0x22b);}const a=this,{client:b}=a,{focusedCell:c}=b,d=c===null||c===void 0x0?void 0x0:c[a7(0x352,0x34b)];if(d&&c!==null&&c!==void 0x0&&c[a7(0x3b8,0x3d7)][a7(0x35e,0x37a)]&&d['isParent']&&d['instanceMeta'](b[a7(0x3a1,0x3ba)])[a7(0x39d,0x3de)]){a['expand'](d);return!![];}return![];}['collapseIfSingleColumn'](){function a8(a,b){return _cmpF(a,b- -0x6bc);}if(this[a8(-0xbd,-0xc9)][a8(-0x10f,-0x10b)][a8(-0xca,-0x109)]===0x1){return this[a8(-0x13d,-0x11b)]();}return![];}['collapseByKey'](){const a=this,{client:b}=a,{focusedCell:c}=b,d=c===null||c===void 0x0?void 0x0:c[a9(-0x1e7,-0x1ca)];function a9(a,b){return _cmpF(a,b- -0x747);}if(c!==null&&c!==void 0x0&&c[a9(-0x1a2,-0x164)]['tree']&&d){if(d[a9(-0x19c,-0x1cb)]&&!d[a9(-0x144,-0x173)](b['store'])[a9(-0x17f,-0x17f)]){a[a9(-0x14e,-0x19b)](d);return!![];}if(d[a9(-0x185,-0x1b8)]&&!d[a9(-0x1e4,-0x1b8)][a9(-0x1c6,-0x1b1)]){b['deselectAll']();b[a9(-0x1df,-0x1d9)]({'record':d['parent'],'column':c[a9(-0x125,-0x164)]});return!![];}}return![];}}Tree[_cmpF(0x5e6,0x5ed)]='b-tree';Tree[_cmpF(0x5fb,0x5d9)]=_cmpF(0x574,0x5a2);GridFeatureManager[_cmpF(0x5da,0x59d)](Tree,![],'Grid');function _cmpb(a,b){const c=_cmpa();_cmpb=function(d,e){d=d-0x1d9;let f=c[d];return f;};return _cmpb(a,b);}GridFeatureManager[_cmpF(0x55a,0x59d)](Tree,!![],_cmpF(0x5c1,0x5a5));export{Tree,TreeColumn};